"use strict";

const inspect = require('util').inspect;
const parseOrderbookChanges = require('ripple-lib-transactionparser').parseOrderbookChanges;
const parseBalanceChanges = require('ripple-lib-transactionparser').parseBalanceChanges;
const balanceChanges = require('./main.js').balanceChanges;
const orderChanges = require('./main.js').orderChanges;
const balanceToTrade = require('./main.js').balanceToTrade;

function show(object){
  return inspect(object, false, null);
}

let bigFee = '{\"result\":\"success\",\"count\":1,\"transactions\":[{\"hash\":\"55DDE13A3430966079C1733715CC1475A16F4588D5610F869B65D9C65DCD5CA3\",\"ledger_index\":35448449,\"date\":\"2017-12-31T03:29:02+00:00\",\"tx\":{\"TransactionType\":\"OfferCreate\",\"Flags\":2148007936,\"Sequence\":705,\"LastLedgerSequence\":35448450,\"TakerPays\":{\"value\":\"1.0494152\",\"currency\":\"DOG\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\"},\"TakerGets\":{\"value\":\"1\",\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\"},\"Fee\":\"7393\",\"SigningPubKey\":\"0202D240B38B281047E365A87ED0FD51192DC2C37F195A9E84F28A25B38B21050E\",\"TxnSignature\":\"3045022100D7D20A0B0DA5162126A31B7A77994BBE78D9754F2EF2AE4A3D3E4B3D161B98E5022075B1A92DDF9803F7E43E81CE60121D353E0432E3793115300AD6E57E8AFEDBFC\",\"Account\":\"rMx55zk9XPUpKB6jijxtqT6pjAiSbSvWHi\"},\"meta\":{\"TransactionIndex\":0,\"AffectedNodes\":[{\"ModifiedNode\":{\"LedgerEntryType\":\"RippleState\",\"PreviousTxnLgrSeq\":35448442,\"PreviousTxnID\":\"7C88B02ACADE83BD62371A5BCAB961A2FE0730772A39CF2BCB5148B405F106BE\",\"LedgerIndex\":\"05EB23AA40BE7D0BBD48C27D744649BD9E2A8D10C33929C9F9D8839A9A29A3AB\",\"PreviousFields\":{\"Balance\":{\"value\":\"-13602788.01953878\",\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\"}},\"FinalFields\":{\"Flags\":2228224,\"LowNode\":\"0000000000000529\",\"HighNode\":\"0000000000000000\",\"Balance\":{\"value\":\"-13602789.01953878\",\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\"},\"LowLimit\":{\"value\":\"0\",\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\"},\"HighLimit\":{\"value\":\"1000000000\",\"currency\":\"JPY\",\"issuer\":\"rGMNHZyj7NizdpDYW4mLZeeWEXeMm6Vv1y\"}}}},{\"ModifiedNode\":{\"LedgerEntryType\":\"RippleState\",\"PreviousTxnLgrSeq\":35448428,\"PreviousTxnID\":\"3F9C02548359944A905DE9B202F13F8D20AA2469A7D371A0B86E751DBD4FA4CF\",\"LedgerIndex\":\"1D88E38FAC7516AF59C2545E992A3DD73B2238E5E4B7268F0A9FFA7BAC2F8F2F\",\"PreviousFields\":{\"Balance\":{\"value\":\"-14356855.69783564\",\"currency\":\"DOG\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\"}},\"FinalFields\":{\"Flags\":2228224,\"LowNode\":\"0000000000000529\",\"HighNode\":\"0000000000000000\",\"Balance\":{\"value\":\"-14356854.64345786\",\"currency\":\"DOG\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\"},\"LowLimit\":{\"value\":\"0\",\"currency\":\"DOG\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\"},\"HighLimit\":{\"value\":\"100000000000\",\"currency\":\"DOG\",\"issuer\":\"rGMNHZyj7NizdpDYW4mLZeeWEXeMm6Vv1y\"}}}},{\"ModifiedNode\":{\"LedgerEntryType\":\"Offer\",\"PreviousTxnLgrSeq\":35448446,\"PreviousTxnID\":\"A9D7D6F8AD371105D6F58C7599DF52BB52B41F232960DBAF7495557389731A32\",\"LedgerIndex\":\"201E2F355ADC6EC93098B78E93BC9F7918A1CAF4D2F368FB9D08FB30A06C3427\",\"PreviousFields\":{\"TakerPays\":{\"value\":\"20434.834\",\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\"},\"TakerGets\":{\"value\":\"21503.029\",\"currency\":\"DOG\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\"}},\"FinalFields\":{\"Flags\":0,\"Sequence\":675034,\"BookNode\":\"0000000000000000\",\"OwnerNode\":\"0000000000003BAF\",\"BookDirectory\":\"93DE04A2416C0893736075FD73954F19F0F60696D153F9415421C324587E5A44\",\"TakerPays\":{\"value\":\"20433.834\",\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\"},\"TakerGets\":{\"value\":\"21501.97672675913\",\"currency\":\"DOG\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\"},\"Account\":\"rGMNHZyj7NizdpDYW4mLZeeWEXeMm6Vv1y\"}}},{\"ModifiedNode\":{\"LedgerEntryType\":\"AccountRoot\",\"PreviousTxnLgrSeq\":35448447,\"PreviousTxnID\":\"9C5E18656EA5EDAE544DB5FEF415A1F6D4B2FD56AD090D2E2039F6B352ECF646\",\"LedgerIndex\":\"C4D3635B0FB71FDBE43768624282DEF90D1C9180CCA6BE893194B2AB5118D848\",\"PreviousFields\":{\"Sequence\":705,\"Balance\":\"45147667\"},\"FinalFields\":{\"Flags\":0,\"Sequence\":706,\"OwnerCount\":5,\"EmailHash\":\"E6B7EB6043EA528CAF8CBB4C36102F91\",\"Balance\":\"45140274\",\"Domain\":\"68656C656E2E636F6D\",\"Account\":\"rMx55zk9XPUpKB6jijxtqT6pjAiSbSvWHi\"}}},{\"ModifiedNode\":{\"LedgerEntryType\":\"RippleState\",\"PreviousTxnLgrSeq\":35448412,\"PreviousTxnID\":\"74F86875ED6BAB076428E658C7CB7373EDB71EE5D2D554A1553A4A703354B77A\",\"LedgerIndex\":\"D73A9114142CE74E08EE9D55BC41E421461A61B6299C5960F3EDB65FE61D61B0\",\"PreviousFields\":{\"Balance\":{\"value\":\"-471.1400413062387\",\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\"}},\"FinalFields\":{\"Flags\":131072,\"LowNode\":\"000000000000050D\",\"HighNode\":\"0000000000000000\",\"Balance\":{\"value\":\"-470.1380413062387\",\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\"},\"LowLimit\":{\"value\":\"0\",\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\"},\"HighLimit\":{\"value\":\"10000000000\",\"currency\":\"JPY\",\"issuer\":\"rMx55zk9XPUpKB6jijxtqT6pjAiSbSvWHi\"}}}},{\"ModifiedNode\":{\"LedgerEntryType\":\"RippleState\",\"PreviousTxnLgrSeq\":35448067,\"PreviousTxnID\":\"8B43CB5527D7E04AB7A507CBA0D179E5091AB1AD9F369A2FCF27646C01C5C68C\",\"LedgerIndex\":\"D8DFFF0432B3534879F2FD0563BD8D3958E88B31A485F6DCF447883B7F35D684\",\"PreviousFields\":{\"Balance\":{\"value\":\"-53.33783314818488\",\"currency\":\"DOG\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\"}},\"FinalFields\":{\"Flags\":131072,\"HighQualityIn\":1000000000,\"LowNode\":\"00000000000004CC\",\"HighNode\":\"0000000000000000\",\"Balance\":{\"value\":\"-54.39010638906366\",\"currency\":\"DOG\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\"},\"LowLimit\":{\"value\":\"0\",\"currency\":\"DOG\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\"},\"HighLimit\":{\"value\":\"10000000000\",\"currency\":\"DOG\",\"issuer\":\"rMx55zk9XPUpKB6jijxtqT6pjAiSbSvWHi\"}}}}],\"TransactionResult\":\"tesSUCCESS\"}}]}';





function parsertest(){
 let testBigFee = balanceToTrade(bigFee, 'rMx55zk9XPUpKB6jijxtqT6pjAiSbSvWHi', true)
 console.log(show(testBigFee))
}


parsertest();
